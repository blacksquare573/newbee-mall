<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="ltd.newbee.mall.newbeemall.dao.QandAandLikesMapper">
	<select id="getQandAandLikes"
		resultType="ltd.newbee.mall.newbeemall.entity.Qa">
		select qa.*,count(t.question_id) as likes from qa
		left join qa_thumbs as t
		on qa.question_id=t.question_id
		where qa.goods_id=#{goodsId} and qa.status=0
		group by qa.question_id
		order by ${orderBy} desc;
	</select>
	
	<insert id="insertNewQuestion">
		INSERT INTO qa
		(question,q_date,status,user_id,goods_id)
		VALUES
		(#{question},#{qDate},#{status},#{userId},#{goodsId});
	</insert>
	
	<insert id="insertLike">
		INSERT INTO qa_thumbs
		(question_id,user_id,date)
		VALUES
		(#{questionId},#{userId},#{date});
	</insert>
</mapper>