<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="ltd.newbee.mall.newbeemall.dao.AddRecommendGoodsMapper">

	<select id="findRecommendGoods"
		resultMap="ltd.newbee.mall.newbeemall.entity.NewBeeMallGoods">
		SELECT distinct
		select distinct info1.*
		from tb_newbee_mall_goods_info as info1
		join tb_newbee_mall_goods_info as info2
		on info2.goods_category_id = info1.goods_category_id
		join rescent_check_goods as chk
		on chk.goods_id = info2.goods_id
		join tb_newbee_mall_goods_category as cat2
		on info1.goods_category_id = cat2.category_id
		left join run_recommend_api_history as hi
		on cat2.category_id = hi.category_id
		and hi.user_id = #{userId,jdbcType=BIGINT}
		where hi.category_id is null and chk.user_id = #{userId,jdbcType=BIGINT}
	</select>

	<insert id="insertindexConfig">
		insert into tb_newbee_mall_index_config (config_id,config_name,
		config_type,confg_rank,is_deleted,create_time)
		values
		<foreach item="item" collection="list" separator=",">
			(#{item.configId}, #{item.configName}, #{item.configType},
			#{item.confgRank}, #{item.isDeleted}, #{item.createTime})
		</foreach>
	</insert>

</mapper>